<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Topic and Subtopic Carousel</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      background-color: #f4f4f9;
    }

    .carousel-container {
      width: 80%;
      margin: 20px auto;
      text-align: center;
      position: relative;
      padding: 0 40px;
    }

    .carousel-title {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      margin-bottom: 10px;
    }

    .carousel-title .carousel-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: #333;
      color: white;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 5px;
      z-index: 10;
    }

    .carousel-title .prev {
      left: 10px;
    }

    .carousel-title .next {
      right: 10px;
    }

    .carousel {
      overflow-x: auto;
      display: flex;
      justify-content: flex-start;
      scroll-behavior: smooth;
    }

    .carousel::-webkit-scrollbar {
      height: 6px;
    }

    .carousel::-webkit-scrollbar-thumb {
      background-color: #ccc;
      border-radius: 3px;
    }

    .carousel::-webkit-scrollbar-track {
      background: #f4f4f9;
    }

    .carousel-track {
      display: flex;
      transition: transform 0.5s ease-in-out;
    }

    .carousel-item {
      min-width: 200px;
      margin: 10px;
      background: #fff;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
      text-align: center;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .carousel-item img {
      width: 80px;
      height: 80px;
      margin-bottom: 10px;
    }

    .carousel-item:hover {
      transform: scale(1.05);
      transition: transform 0.3s;
    }

    /* SUBTOPIC CAROUSEL */
    .subtopic-carousel {
      display: none;
    }

    .subtopic-carousel.active {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Subtopic carousel title uses space-between
       so the subtopic arrows can be on each side */
    .subtopic-carousel .carousel-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 20px;
      padding: 0 20px;
      position: relative; /* If you want absolute-positioned arrows */
    }

    /* Different classes for subtopic arrows so they don't overlap text */
    .subtopic-carousel .carousel-button.subtopic-prev,
    .subtopic-carousel .carousel-button.subtopic-next {
      position: static; /* No absolute positioning */
      transform: none;
      margin: 0 10px;
      background-color: #333;
      color: #fff;
      border: none;
      border-radius: 5px;
      padding: 10px 15px;
      cursor: pointer;
    }

    .subtopic-carousel .carousel {
      overflow-x: auto;
      display: flex;
      justify-content: flex-start;
      scroll-behavior: smooth;
    }

    .subtopic-carousel .carousel::-webkit-scrollbar {
      height: 6px;
    }

    .subtopic-carousel .carousel::-webkit-scrollbar-thumb {
      background-color: #ccc;
      border-radius: 3px;
    }

    .subtopic-carousel .carousel::-webkit-scrollbar-track {
      background: #f4f4f9;
    }

    .link-button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      display: none; /* Hidden by default, shown upon subtopic selection */
    }

    .link-button:hover {
      background-color: #0056b3;
    }

    @media (max-width: 768px) {
      .carousel-container {
        width: 100%;
        padding: 0 20px;
      }

      .carousel-item {
        min-width: 150px;
        margin: 5px;
        padding: 10px;
      }

      .carousel-item img {
        width: 60px;
        height: 60px;
      }

      .carousel-title .carousel-button {
        padding: 5px 10px;
      }
    }

    @media (max-width: 480px) {
      .carousel-title h1,
      .carousel-title h2 {
        font-size: 16px;
      }

      .carousel-item {
        min-width: 120px;
        margin: 3px;
        padding: 5px;
      }

      .carousel-item img {
        width: 50px;
        height: 50px;
      }

      .carousel-title .prev,
      .carousel-title .next {
        top: auto;
        bottom: 10px;
      }

      .carousel-title .carousel-button {
        padding: 5px;
      }
    }
  </style>
</head>
<body>
  <!-- MAIN TOPIC CAROUSEL -->
  <div class="carousel-container">
    <div class="carousel-title">
      <button class="carousel-button prev">&#10094;</button>
      <h1>Choose a Topic</h1>
      <button class="carousel-button next">&#10095;</button>
    </div>
    <div class="carousel">
      <div class="carousel-track">
        <div class="carousel-item" data-topic="Threats">
          <img src="assets\threats-dalle.webp" alt="Threats" />
          <span>Threats</span>
        </div>
        <div class="carousel-item" data-topic="Protocols">
          <img src="assets\protocols-dalle.webp" alt="Protocols" />
          <span>Protocols</span>
        </div>
        <div class="carousel-item" data-topic="Standardization Bodies">
          <img src="assets/standardizationbodies-dalle.webp" alt="Standardization Bodies" />
          <span>Standardization Bodies</span>
        </div>
        <div class="carousel-item" data-topic="Countries">
          <img src="assets/countries-dalle.webp" alt="Countries" />
          <span>Countries</span>
        </div>
        <div class="carousel-item" data-topic="Industries">
          <img src="assets/industries-dalle.webp" alt="Industries" />
          <span>Industries</span>
        </div>
        <div class="carousel-item" data-topic="Post Quantum Resistant Algorithms">
          <img src="assets/quantumresistantalgorithm.webp" alt="Post Quantum Resistant Algorithms" />
          <span>Post Quantum Resistant Algorithms</span>
        </div>
        <div class="carousel-item" data-topic="Quantum Cryptography">
          <img src="assets/quantumcryptography-dalle.webp" alt="Quantum Cryptography" />
          <span>Quantum Cryptography</span>
        </div>
        <div class="carousel-item" data-topic="Certificates Formats">
          <img src="assets/certificates-dalle.webp" alt="Certificates Formats" />
          <span>Certificates Formats</span>
        </div>
      </div>
    </div>
  </div>

  <!-- SUBTOPIC CAROUSEL -->
  <div class="subtopic-carousel" id="subtopic-carousel">
    <div class="carousel-title">
      <!-- Different classes for subtopic prev/next -->
      <button class="carousel-button subtopic-prev">&#10094;</button>
      <h2>Subtopics</h2>
      <button class="carousel-button subtopic-next">&#10095;</button>
    </div>
    <div class="carousel">
      <div class="carousel-track" id="subtopic-track">
        <!-- Subtopics will be dynamically populated -->
      </div>
    </div>
  </div>

  <!-- NAVIGATE BUTTON -->
  <button class="link-button" id="navigate-button">Go to Page</button>

  <script>
    // MAIN CAROUSEL
    const carouselTrack = document.querySelector('.carousel-track');
    const prevButton = document.querySelectorAll('.carousel-title .prev')[0];
    const nextButton = document.querySelectorAll('.carousel-title .next')[0];
    const items = Array.from(carouselTrack.children);

    let currentIndex = 0;
    function updateCarousel() {
      const width = items[0].offsetWidth;
      carouselTrack.style.transform = `translateX(-${currentIndex * width}px)`;
    }
    prevButton.addEventListener('click', () => {
      if (currentIndex > 0) {
        currentIndex--;
        updateCarousel();
      }
    });
    nextButton.addEventListener('click', () => {
      if (currentIndex < items.length - 1) {
        currentIndex++;
        updateCarousel();
      }
    });

    // SUBTOPIC CAROUSEL
    const subtopicCarousel = document.getElementById('subtopic-carousel');
    const subtopicTrack = document.getElementById('subtopic-track');
    // Updated selectors for subtopic arrows
    const subtopicPrevButton = document.querySelectorAll('.subtopic-carousel .subtopic-prev')[0];
    const subtopicNextButton = document.querySelectorAll('.subtopic-carousel .subtopic-next')[0];
    const navigateButton = document.getElementById('navigate-button');

    let subtopicIndex = 0;
    let selectedTopic = "";
    let selectedSubtopic = "";

    // Dictionary updated to match "Certificates Formats" key
    const subtopics = {
      "Threats": ["Harvest now decrypt later", "Software Supply Chain", "Non repudiation"],
      "Protocols": ["SSH", "TLS", "IPSEC"],
      "Standardization Bodies": ["NIST", "IETF", "NSA", "CISA", "BSI", "ANSSI", "GSMA"],
      "Countries": ["US", "Europe", "Canada", "Australia", "Singapore", "Germany"],
      "Industries": ["Telecom", "Automotive", "Banking", "Government", "Enterprises"],
      "Post Quantum Resistant Algorithms": ["ML-KEM", "ML-DSA", "SLH-DSA"],
      "Quantum Cryptography": ["QRNG", "QKD"],
      "Certificates Formats": ["Pure", "Hybrid", "Composite"],
      // "PQC Lab": ["OQS", "EJBCA", "OpenSSL", "OpenSSH", "OpenVPN", "OpenSwan", "StrongSwan"] // Example only
    };

    function updateSubtopics(topic) {
      subtopicTrack.innerHTML = "";
      if (subtopics[topic]) {
        subtopics[topic].forEach(subtopic => {
          const subtopicItem = document.createElement('div');
          subtopicItem.className = 'carousel-item';
          subtopicItem.textContent = subtopic;
          subtopicItem.addEventListener('click', () => {
            selectedSubtopic = subtopic;
            navigateButton.textContent = `Go to ${selectedTopic} / ${selectedSubtopic}`;
            navigateButton.style.display = 'block';
          });
          subtopicTrack.appendChild(subtopicItem);
        });
      }
    }

    function updateSubtopicCarousel() {
      const width = subtopicTrack.children[0]?.offsetWidth || 0;
      subtopicTrack.parentElement.scrollTo({
        left: subtopicIndex * width,
        behavior: 'smooth',
      });
    }

    subtopicPrevButton.addEventListener('click', () => {
      if (subtopicIndex > 0) {
        subtopicIndex--;
        updateSubtopicCarousel();
      }
    });

    subtopicNextButton.addEventListener('click', () => {
      if (subtopicIndex < subtopicTrack.children.length - 1) {
        subtopicIndex++;
        updateSubtopicCarousel();
      }
    });

    items.forEach(item => {
      item.addEventListener('click', () => {
        selectedTopic = item.getAttribute('data-topic');
        // Reset the subtopic index whenever a new topic is selected
        subtopicIndex = 0;

        // Show the subtopic carousel
        subtopicCarousel.classList.add('active');
        updateSubtopics(selectedTopic);
        updateSubtopicCarousel();

        // Hide the navigate button until a subtopic is clicked
        navigateButton.style.display = 'none';
      });
    });

    // NAVIGATE BUTTON
    navigateButton.addEventListener('click', () => {
      if (selectedTopic && selectedSubtopic) {
        const path = `/sections/${selectedTopic}/${selectedSubtopic}/index.html`;
        window.location.href = path;
      }
    });
  </script>
</body>
</html>
